"use strict";(self.webpackChunkwarframe_hub=self.webpackChunkwarframe_hub||[]).push([[836],{7836:(N,l,r)=>{r.r(l),r.d(l,{HubModule:()=>J});var u=r(6895),p=r(864),e=r(1571),m=r(5963),f=r(4351),d=r(529);let g=(()=>{class t{constructor(s){this.http=s}get(s){for(;s.startsWith("/");)s=s.slice(1);return this.http.get(`https://api.warframestat.us/${s}`)}worldState(s=60){return(0,m.H)(0,1e3*s).pipe((0,f.b)(n=>this.get("pc")))}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(d.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=r(1660),b=r(9062),v=r(4795);let x=(()=>{class t{constructor(){this.text="",this.class="",this.secondsRemaining=0}calcSecondsRemaining(){if(this.expires&&!this.expiresAsDate&&(this.expiresAsDate=new Date(this.expires)),!this.expiresAsDate)return 0;const s=new Date;return this.secondsRemaining=Math.floor(this.expiresAsDate.getTime()/1e3)-Math.floor(s.getTime()/1e3),this.secondsRemaining}ngOnInit(){this.subscription=(0,m.H)(0,1e3).subscribe(()=>{const s=this.calcSecondsRemaining();if(s<0)return this.text="expired",void(this.class="bg-blue-600");this.calcText(),this.class=s<300?"bg-red-600":s<1500?"bg-yellow-600":"bg-green-700"})}ngOnDestroy(){this.subscription?.unsubscribe()}calcText(){const s=Math.floor(this.secondsRemaining%60),n=Math.floor(this.secondsRemaining/60%60),o=Math.floor(this.secondsRemaining/3600%24);var a=`${this.padNumber(s)}s`;(n||o)&&(a=`${this.padNumber(n)}m ${a}`),o&&(a=`${o}h ${a}`),this.text=a}padNumber(s){return String(s).padStart(2,"0")}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-countdown-timer"]],inputs:{expires:"expires"},decls:2,vars:2,consts:[[1,"text-white","rounded-sm","px-1","bg-opacity-80","backdrop-blur-sm",3,"ngClass"]],template:function(s,n){1&s&&(e.TgZ(0,"span",0),e._uU(1),e.qZA()),2&s&&(e.Q6J("ngClass",n.class),e.xp6(1),e.Oqu(n.text))},dependencies:[u.mk],encapsulation:2}),t})();const T=function(t,i){return{"bg-blue-500/10":t,"border-blue-500":i}};function C(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div"),e._uU(7),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA()(),e.TgZ(10,"div",5)(11,"div"),e._uU(12),e.qZA(),e._UZ(13,"app-countdown-timer",6),e.qZA()()()(),e.BQk()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(8,T,s.missionTypes.indexOf(s.fissure.missionType)>=0,s.missionTypes.indexOf(s.fissure.missionType)>=0)),e.xp6(2),e.Q6J("src","https://cdn.warframestat.us/genesis/svg/fissures/"+s.fissure.tierNum+".svg",e.LSH)("alt",s.fissure.tier),e.xp6(4),e.AsE("",s.fissure.tier," - ",s.fissure.missionType,""),e.xp6(2),e.Oqu(s.fissure.node),e.xp6(3),e.Oqu(s.fissure.enemy),e.xp6(1),e.Q6J("expires",s.fissure.expiry)}}let S=(()=>{class t{constructor(s){this.settingsService=s}ngOnInit(){}get missionTypes(){return this.settingsService.settings.highlightedFissures}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(v.g))},t.\u0275cmp=e.Xpm({type:t,selectors:[["fissure-card"]],inputs:{fissure:"fissure"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"bg-slate-200/25","p-2","backdrop-blur","border","rounded","shadow-sm",3,"ngClass"],[1,"flex","items-center"],[1,"h-12","w-12",3,"src","alt"],[1,"pl-2","flex-1"],[1,"flex","justify-between"],[3,"expires"]],template:function(s,n){1&s&&e.YNc(0,C,14,11,"ng-container",0),2&s&&e.Q6J("ngIf",n.fissure)},dependencies:[u.mk,u.O5,x],encapsulation:2}),t})();function w(t,i){if(1&t&&(e.TgZ(0,"li"),e._UZ(1,"fissure-card",6),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.Q6J("fissure",s)}}function y(t,i){if(1&t&&(e.TgZ(0,"ul",4),e.YNc(1,w,2,1,"li",5),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.fissuresFiltered)}}let F=(()=>{class t{constructor(){this.tab=localStorage.getItem("fissureView")||"all"}get fissuresFiltered(){if(!this.fissures)return[];switch(this.fissures.sort((s,n)=>s.tierNum-n.tierNum),this.tab){case"normal":return this.fissures.filter(s=>0==s.isHard&&0==s.isStorm);case"steelpath":return this.fissures.filter(s=>1==s.isHard);case"voidstorm":return this.fissures.filter(s=>1==s.isStorm);default:return this.fissures}}ngOnInit(){}selectTab(s){localStorage.setItem("fissureView",s),this.tab=s}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["hub-fissures"]],inputs:{fissures:"fissures"},decls:12,vars:5,consts:[[1,"text-center","text-lg","font-semibold"],[1,"mt-2","flex","justify-center","items-center","space-x-1"],["appButton","primary-outline","size","sm",3,"active","click"],["class","mt-2 grid gap-2 grid-cols-2",4,"ngIf"],[1,"mt-2","grid","gap-2","grid-cols-2"],[4,"ngFor","ngForOf"],[3,"fissure"]],template:function(s,n){1&s&&(e.TgZ(0,"h1",0),e._uU(1,"Fissures"),e.qZA(),e.TgZ(2,"div",1)(3,"button",2),e.NdJ("click",function(){return n.selectTab("normal")}),e._uU(4," Fissures "),e.qZA(),e.TgZ(5,"button",2),e.NdJ("click",function(){return n.selectTab("voidstorm")}),e._uU(6," Void Storm "),e.qZA(),e.TgZ(7,"button",2),e.NdJ("click",function(){return n.selectTab("steelpath")}),e._uU(8," Steel Path "),e.qZA(),e.TgZ(9,"button",2),e.NdJ("click",function(){return n.selectTab("all")}),e._uU(10," All "),e.qZA()(),e.YNc(11,y,2,1,"ul",3)),2&s&&(e.xp6(3),e.Q6J("active","normal"==n.tab),e.xp6(2),e.Q6J("active","voidstorm"==n.tab),e.xp6(2),e.Q6J("active","steelpath"==n.tab),e.xp6(2),e.Q6J("active","all"==n.tab),e.xp6(2),e.Q6J("ngIf",n.fissures))},dependencies:[u.sg,u.O5,b.H,S],encapsulation:2}),t})();const Z=[{path:"",component:(()=>{class t{constructor(s){this.warframeApi=s}ngOnInit(){this.worldStateSubscription=this.warframeApi.worldState().subscribe(s=>{this.worldState=s})}ngOnDestroy(){this.worldStateSubscription?.unsubscribe()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(g))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-hub"]],decls:2,vars:1,consts:[[1,"max-w-4xl","mx-auto","py-4"],["appCard","",3,"fissures"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0),e._UZ(1,"hub-fissures",1),e.qZA()),2&s&&(e.xp6(1),e.Q6J("fissures",null==n.worldState?null:n.worldState.fissures))},dependencies:[h.H,F],encapsulation:2}),t})()}];let A=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(Z),p.Bz]}),t})();var H=r(4466);let J=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,A,H.m]}),t})()}}]);